# yaml-language-server: $schema=https://raw.githubusercontent.com/Open-CMSIS-Pack/devtools/schemas/projmgr/1.5.0/tools/projmgr/schemas/clayer.schema.json

layer:
  type: Stream
  # variant: VCom
  description: Synchronous Data Stream (SDS) with Recorder and SDS I/O over Virtual COM port

  connections:
    - connect: Stream VCom
      consumes:
        - CMSIS-RTOS2
        - CMSIS_USB_Device: 0
      provides:
        - Stream_SDS
        - Stream_SDS_Recorder
        - Stream_SDSIO

  packs:
    - pack: Keil::MDK-Middleware@7.16.0

  define:
    - STREAM_SDSIO_VCOM
    
  components:
    - component: Keil::USB&MDK-Plus:CORE&Debug
      for-context: .VCom_Debug
    - component: Keil::USB&MDK-Plus:CORE&Release
      for-context: .VCom_Release
    - component: Keil::USB&MDK-Plus:Device
    - component: Keil::USB&MDK-Plus:Device:CDC

  groups:
    - group: Stream
      files:
        - file: ../../../sds/include/sds.h
        - file: ../../../sds/include/sdsio.h
        - file: ../../../sds/include/sds_rec.h
        - file: ../../../sds/source/sds.c
        - file: ../../../sds/source/sdsio_vcom.c
        - file: ../../../sds/source/sds_rec.c
